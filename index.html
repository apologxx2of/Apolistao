<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Portal de Notícias do Apolistão</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Portal oficial de notícias do Governo do Apolistão" />
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.example.com/lib.js"
        integrity="sha384-XXXXX"
        crossorigin="anonymous">
  </script>
  <script src="https://www.google.com/recaptcha/api.js?render=6LdXSJ4rAAAAAKK79KvOhd5Nou2ebB2g4auEQepH"></script>
  <script>
    grecaptcha.execute();
    function onSubmit(token) {
      document.getElementById("demo-form").submit();
    }
  </script>
  <script>
        var onSubmit = function(token) {
          console.log('success!');
        };

        var onloadCallback = function() {
          grecaptcha.render('submit', {
            'sitekey' : '6LdXSJ4rAAAAAKK79KvOhd5Nou2ebB2g4auEQepH',
            'callback' : onSubmit
          });
        };
  </script>
  
  <style>
    /* Reset simples */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Open Sans', sans-serif;
      background: #f9fafb;
      color: #222;
      line-height: 1.5;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      background-color: #003366;
      color: white;
      padding: 15px 30px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      user-select: none;
    }
    header h1 {
      font-weight: 600;
      font-size: 1.8rem;
      letter-spacing: 2px;
    }

    nav a {
      color: white;
      text-decoration: none;
      margin-left: 20px;
      font-weight: 600;
      transition: color 0.3s ease;
    }
    nav a:hover, nav a:focus {
      color: #66ccff;
      outline: none;
    }

    /* Banner grande */
    .banner {
      position: relative;
      width: 100%;
      max-height: 350px;
      overflow: hidden;
      border-bottom: 4px solid #003366;
    }
    .banner img {
      width: 100%;
      height: 350px;
      object-fit: cover;
      filter: brightness(0.75);
      user-select: none;
    }
    .banner-text {
      position: absolute;
      bottom: 30px;
      left: 30px;
      color: white;
      font-size: 2rem;
      font-weight: 700;
      max-width: 600px;
      text-shadow: 2px 2px 6px rgba(0,0,0,0.7);
      user-select: none;
    }

    main {
      flex: 1;
      max-width: 1200px;
      margin: 30px auto;
      padding: 0 20px;
    }

    /* Grid das notícias */
    .noticias-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(320px,1fr));
      gap: 24px;
    }

    article.noticia {
      background: white;
      border-radius: 10px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      cursor: pointer;
      transition: box-shadow 0.3s ease;
    }
    article.noticia:hover {
      box-shadow: 0 6px 20px rgba(0, 51, 102, 0.25);
    }

    article.noticia img {
      width: 100%;
      height: 180px;
      object-fit: cover;
      user-select: none;
    }

    article.noticia .conteudo {
      padding: 15px 20px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    article.noticia time {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 6px;
      user-select: text;
    }

    article.noticia h2 {
      font-size: 1.2rem;
      color: #003366;
      margin-bottom: 12px;
      user-select: text;
    }

    article.noticia p {
      flex: 1;
      font-size: 1rem;
      color: #444;
      user-select: text;
    }

    footer {
      background: #003366;
      color: white;
      text-align: center;
      padding: 18px 0;
      user-select: none;
      margin-top: auto;
      font-size: 0.9rem;
    }
  
    #demo-form {
      display: none;
    }

    .grecaptcha-badge {
      opacity: 0.2 !important;
    }

    /* Responsividade */
    @media (max-width: 480px) {
      .banner-text {
        font-size: 1.4rem;
        max-width: 90%;
        bottom: 20px;
        left: 15px;
      }
      article.noticia img {
        height: 140px;
      }
    }
  </style>
</head>
<body>
  
<form id="demo-form" action="?" method="POST">
  <button class="g-recaptcha" data-sitekey="6LdXSJ4rAAAAAKK79KvOhd5Nou2ebB2g4auEQepH" data-callback="onSubmit"></button>
  <br/>
</form>
<div class="g-recaptcha"
  data-sitekey="6LdXSJ4rAAAAAKK79KvOhd5Nou2ebB2g4auEQepH"
  data-callback="onSubmit"
  data-size="invisible">
</div>

<header role="banner">
  <h1>Governo do Apolistão</h1>
  <nav role="navigation" aria-label="Menu principal">
    <a href="index">Início</a>
    <a href="index">Notícias</a>
    <a href="servicos">Serviços</a>
    <a href="contato">Contato</a>
  </nav>
</header>

<section class="banner" aria-label="Banner principal">
  <img src="banner.jpg" alt="Capital do Apolistão" />
  <div class="banner-text">Portal Oficial de Notícias do Apolistão</div>
</section>

<main role="main">
  <h2 style="margin-bottom:20px; color:#003366;">Últimas Notícias</h2>
  <section class="noticias-grid" id="noticias"></section>
</main>

<footer role="contentinfo">
  &copy; 2025 Governo do Apolistão — Todos os direitos reservados.
</footer>

<script>
  // Função para formatar data para pt-BR (ex: 07/08/2025)
  function formatarData(dataStr) {
    const dt = new Date(dataStr);
    if (isNaN(dt)) return dataStr;
    return dt.toLocaleDateString('pt-BR');
  }

  // Função para carregar notícias do arquivo noticias.xml
  async function carregarNoticias() {
    try {
      const resposta = await fetch('noticias.xml');
      if (!resposta.ok) throw new Error('Erro ao carregar notícias');

      const xmlText = await resposta.text();
      const parser = new DOMParser();
      const xml = parser.parseFromString(xmlText, 'application/xml');
      
      const items = xml.querySelectorAll('item');
      const container = document.getElementById('noticias');
      container.innerHTML = ''; // Limpa o conteúdo antes de popular

      items.forEach(item => {
        const titulo = item.querySelector('titulo')?.textContent ?? 'Título não informado';
        const data = item.querySelector('data')?.textContent ?? '';
        const resumo = item.querySelector('resumo')?.textContent ?? '';
        const imagem = item.querySelector('imagem')?.textContent ?? 'https://via.placeholder.com/400x250?text=Imagem+indisponível';
        const link = item.querySelector('link')?.textContent ?? '#';

        // Cria o elemento da notícia
        const article = document.createElement('article');
        article.classList.add('noticia');
        article.innerHTML = `
          <a href="${link}" target="_blank" rel="noopener noreferrer" aria-label="Leia a notícia: ${titulo}">
            <img src="${imagem}" alt="Imagem da notícia: ${titulo}" />
            <div class="conteudo">
              <time datetime="${data}">${formatarData(data)}</time>
              <h2>${titulo}</h2>
              <p>${resumo}</p>
            </div>
          </a>
        `;
        container.appendChild(article);
      });

      if(items.length === 0) {
        container.innerHTML = "<p>Nenhuma notícia disponível no momento.</p>";
      }
    } catch (err) {
      console.error(err);
      const container = document.getElementById('noticias');
      container.innerHTML = "<p>Erro ao carregar notícias.</p>";
    }
  }

  carregarNoticias();
</script>

</body>
</html>
